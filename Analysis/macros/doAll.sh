# script to run entire analysis for a particular dataset

dataset=$1

runs=0

if [[ "$dataset" =~ Coll10\_Promptv8\_* ]]
then
    runs=133320,133321,133446,133448,133450,133474,133483
fi

if [[ "$dataset" =~ Coll10\_Promptv9\_* ]]
then
    runs=133874,133875,133877,133881,133885,133927,133928
fi

if [[ "$dataset" =~ Coll10\_Promptv3\_* ]]
then
    runs=128074,128094,128096,128097,128101,128291,128292,128293,128294,128295,128296,128298,128740,128741,128743,128744,128745,128746,128747,128749,128750,128752,128753,128755,128757,128762,128764,128765,128766,128891,129196,129316,129319,129320,129321,129393,129398,129407,130231,130239,130242,130244,130252,130258,130747,130751,130767,130768,130771,130772,130777,130787,130792,131065,131297,131300,131420,131626,132033,132202,132226,132348,132349,132361,132362,132365,132366,132562,132563,132589,132592,132916,132922
fi

if [[ "$dataset" =~ Coll09\_* ]]
then
    runs=124022,124023,124024,124025,124026,124027,124029,124030,124108,124112,124115,124119,124120,124228,124229,124230,124275
fi

echo "Runlist : $runs"

# make histograms
./makeHistograms -p ntuples/stoppedHSCP_tree_$dataset.root $dataset >& $dataset.log

# make plots
python macros/makePlots.py $dataset/histograms.root
python macros/makePlotsByRun.py $dataset $runs

# tarball
tar -czvf $dataset.tgz $dataset/*
cp $dataset.tgz /users/phjjb/stoppedHSCP/.

